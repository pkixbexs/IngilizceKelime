<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ä°ngilizce Kelime Testi (94 Kelime)</title>
    
    <style>
        /* Siyah Tema ve Mobil Uyumlu CSS */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #000000;
            color: #ffffff;
            padding: 10px; /* Ekran kenarlarÄ±nda boÅŸluk */
            box-sizing: border-box;
        }

        #app-container {
            background: #1a1a1a;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(255, 255, 255, 0.15);
            width: 100%;
            max-width: 800px;
            height: 100%;
            max-height: 95vh; /* Dikeyde sÄ±ÄŸdÄ±rmak iÃ§in */
            display: flex;
            flex-direction: column;
            text-align: center;
            overflow-y: auto; /* Ä°Ã§erik taÅŸarsa kaydÄ±rma Ã§ubuÄŸu */
        }
        
        h2 {
            color: #4caf50;
            margin-top: 5px;
            margin-bottom: 15px;
        }

        /* BaÅŸlangÄ±Ã§ EkranÄ± */
        #start-screen, #game-container, #study-container {
            flex-grow: 1; /* EkranÄ± doldurmasÄ±nÄ± saÄŸlar */
        }
        
        #initial-score-display {
            font-size: 1em;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-around;
            padding: 8px;
            background-color: #0d0d0d;
            border-radius: 6px;
        }
        
        #test-mode-selection {
            display: flex;
            flex-wrap: wrap; /* Butonlar alta insin */
            justify-content: space-between;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .mode-button {
            border: none;
            padding: 12px 10px;
            border-radius: 8px;
            font-size: 0.9em;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
            width: calc(50% - 5px); /* Ä°ki butonu yan yana getir */
            box-sizing: border-box;
        }

        .test-mode-button { 
            background-color: #00bcd4; 
            color: black;
        }
        .test-mode-button:hover {
            background-color: #00a0b0;
        }
        
        #study-button, #back-to-start-button-study, #toggle-meanings-button {
            background-color: #ff9800;
            color: black;
            width: 100%;
            margin-top: 10px;
        }

        /* Oyun AlanÄ± */
        #score-display {
            font-size: 1.1em;
            font-weight: bold;
            display: flex;
            justify-content: space-around;
            padding: 8px 0;
            background-color: #0d0d0d;
            border-radius: 6px;
            margin-bottom: 20px;
        }
        
        #word-display {
            font-size: 1.8em; 
            font-weight: bold;
            color: #4caf50;
            margin-bottom: 25px;
            min-height: 2.2em;
            display: flex;
            align-items: center;
            justify-content: center;
            text-transform: uppercase;
        }

        .option-button {
            background-color: #333333;
            color: #ffffff;
            border: 1px solid #444444;
            width: 100%;
            padding: 12px;
            margin-bottom: 8px;
            border-radius: 8px;
            font-size: 1em;
            text-align: left;
            cursor: pointer;
            transition: background-color 0.15s;
        }

        .option-button:hover:not(:disabled) {
            background-color: #555555;
        }

        /* Geri Bildirim ve Ä°pucu AlanÄ± */
        .option-button.correct {
            background-color: #4caf50 !important; 
            color: white;
            font-weight: bold;
        }

        .option-button.incorrect {
            background-color: #f44336 !important; 
            color: white;
        }
        
        #hint-area {
            display: flex;
            justify-content: space-between;
            align-items: flex-end; /* ButonlarÄ± aÅŸaÄŸÄ± hizala */
            margin-top: 15px;
            position: relative;
        }

        #hint-button {
            background-color: #00bcd4; 
            color: black;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 0.9em;
            cursor: pointer;
            transition: background-color 0.3s;
            font-weight: bold;
            flex-shrink: 0;
        }

        #next-button {
            background-color: #ff9800;
            color: black;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 0.9em;
            cursor: pointer;
            transition: background-color 0.3s;
            position: absolute; /* SaÄŸ alta sabitleme */
            right: 0;
            bottom: 0;
        }
        
        #feedback {
            font-size: 1.1em;
            font-weight: bold;
            min-height: 25px;
            text-align: center;
            margin-top: 10px;
        }

        #hint-display {
            margin-top: 10px;
            font-size: 0.9em;
            color: #00bcd4;
            text-align: left;
            padding: 5px;
            background-color: #0d0d0d;
            border-radius: 4px;
            flex-grow: 1; /* Kalan alanÄ± doldur */
            margin-right: 10px;
            min-height: 30px;
            display: flex;
            align-items: center;
        }

        /* Kelime Listesi Stilleri */
        #word-list-table {
            max-height: 350px;
            overflow-y: auto;
            margin: 15px 0;
            padding: 10px;
            border: 1px solid #444444;
            border-radius: 8px;
            text-align: left;
            background-color: #0d0d0d;
        }

        .word-item {
            display: flex;
            flex-direction: column; 
            padding: 8px 0;
            border-bottom: 1px dotted #333333;
        }

        .english-word {
            font-weight: bold;
            color: #4caf50;
            text-transform: uppercase;
            font-size: 1.1em;
        }

        .turkish-meaning {
            color: #00bcd4;
            font-size: 0.9em;
            margin-top: 3px;
            cursor: pointer;
        }

        .meaning-hidden {
            color: transparent !important; 
            background-color: #333333; 
            border-radius: 4px;
            padding: 0 5px;
            user-select: none; 
            transition: background-color 0.1s;
        }
        
    </style>
</head>
<body>

    <div id="app-container">
        
        <div id="start-screen">
            <h2>Ä°ngilizce Kelime Testine HoÅŸ Geldiniz!</h2>
            <p>Toplam **94** kelimelik bir teste baÅŸlamak Ã¼zeresiniz.</p>
            <div id="initial-score-display">
                <span style="color: #4caf50;">âœ… DoÄŸru: 0</span>
                <span style="color: #f44336;">âŒ YanlÄ±ÅŸ: 0</span>
                <span id="initial-hint-display" style="color: #00bcd4;">ğŸ’¡ Ä°pucu: 0</span>
            </div>

            <h3>Test Modunu SeÃ§in:</h3>
            <div id="test-mode-selection">
                <button id="mode-1" class="mode-button test-mode-button" data-mode="definition_to_word">1. Ä°ng. TanÄ±m &rarr; Kelime</button>
                <button id="mode-2" class="mode-button test-mode-button" data-mode="word_to_definition">2. Kelime &rarr; TanÄ±m</button>
                <button id="mode-3" class="mode-button test-mode-button" data-mode="word_to_turkish">3. Ä°ng. Kelime &rarr; TÃ¼rkÃ§e Anlam</button>
                <button id="mode-4" class="mode-button test-mode-button" data-mode="turkish_to_word">4. TÃ¼rkÃ§e Anlam &rarr; Ä°ng. Kelime</button>
                
                <button id="mode-5" class="mode-button test-mode-button" data-mode="not_available_antonym">5. ZÄ±t AnlamlÄ±sÄ±nÄ± Sorma</button>
                <button id="mode-6" class="mode-button test-mode-button" data-mode="word_to_definition">6. Kelime &rarr; TanÄ±m (ÅÄ±klar)</button>
                <button id="mode-7" class="mode-button test-mode-button" data-mode="not_available_sentence">7. CÃ¼mle BoÅŸluk Doldurma</button>
                <button id="mode-8" class="mode-button test-mode-button" data-mode="not_available_context">8. FarklÄ± OlanÄ± Bulma</button>
            </div>
            
            <hr style="border-color: #333; margin: 20px 0;">
            <button id="study-button" class="mode-button">KELÄ°ME Ã‡ALIÅMA</button>
        </div>
        
        <div id="study-container" style="display:none;">
            <h2>Kelime Ã‡alÄ±ÅŸma BÃ¶lÃ¼mÃ¼ (Ä°ngilizce - TÃ¼rkÃ§e)</h2>
            <p>Kelimeler alfabetik sÄ±raya gÃ¶redir.</p>
            <button id="toggle-meanings-button" class="mode-button">ANLAMLARI GÄ°ZLE</button>
            <div id="word-list-table">
                </div>
            <button id="back-to-start-button-study" class="mode-button">ANA EKRANA DÃ–N</button>
        </div>
        
        <div id="game-container" style="display:none;"> 
            <div id="score-display">
                <span id="correct-score" style="color: #4caf50;">âœ… DoÄŸru: 0</span>
                <span id="incorrect-score" style="color: #f44336;">âŒ YanlÄ±ÅŸ: 0</span>
                <span id="hint-count-display" style="color: #00bcd4;">ğŸ’¡ Ä°pucu: 0</span>
            </div>
            
            <div id="word-display">SORU YÃœKLENÄ°YOR...</div>
            
            <div id="options-container">
                <button class="option-button" data-key="A"></button>
                <button class="option-button" data-key="B"></button>
                <button class="option-button" data-key="C"></button>
                <button class="option-button" data-key="D"></button>
                <button class="option-button" data-key="E"></button>
            </div>

            <div id="feedback"></div>
            
            <div id="hint-area">
                <div id="hint-display"></div>
                <button id="hint-button">ğŸ’¡ Ä°pucu GÃ¶ster</button>
                <button id="next-button" style="display:none;">Sonraki Kelime</button>
            </div>
        </div>
    </div>

    <script>
        // TÃ¼rkÃ§e kÃ¼Ã§Ã¼k harf dÃ¶nÃ¼ÅŸÃ¼mÃ¼ iÃ§in
        function toTurkishLowerCase(text) {
            if (!text) return '';
            return text.toLocaleLowerCase('tr');
        }

        // --- KELÄ°ME LÄ°STESÄ° (94 KELÄ°ME) ---
        const allWords = [
            { "english": "Ordinary", "definition": "normal, usual, or happening most of the time", "turkish": toTurkishLowerCase("sÄ±radan") },
            { "english": "Quaint", "definition": "attractive in an unusual or old-fashioned way", "turkish": toTurkishLowerCase("ilginÃ§, sevimli eski tarz") },
            { "english": "Outskirts", "definition": "the areas of a town or city that are furthest from the center", "turkish": toTurkishLowerCase("kenar mahalleler, ÅŸehrin dÄ±ÅŸÄ±") },
            { "english": "Immersing", "definition": "becoming completely involved in something, or putting something into a liquid", "turkish": toTurkishLowerCase("dalmak, kendini kaptÄ±rmak") },
            { "english": "Fixing up", "definition": "repairing or improving a building or piece of furniture", "turkish": toTurkishLowerCase("tamir etme, toparlama") },
            { "english": "Relatively", "definition": "when compared to something else; quite or somewhat", "turkish": toTurkishLowerCase("nispeten") },
            { "english": "Uneventful", "definition": "nothing interesting, exciting, or unusual happened", "turkish": toTurkishLowerCase("olaysÄ±z, sakin") },
            { "english": "Hurdle", "definition": "a problem or difficulty that you must deal with", "turkish": toTurkishLowerCase("engel") },
            { "english": "Encountered", "definition": "experienced, or met someone unexpectedly", "turkish": toTurkishLowerCase("karÅŸÄ±laÅŸtÄ±") },
            { "english": "Draughty (Drafty)", "definition": "having cold air current blowing through a room", "turkish": toTurkishLowerCase("cereyan yapan") },
            { "english": "Crisp", "definition": "fresh, clean, and cool; or pleasantly hard and dry", "turkish": toTurkishLowerCase("serin/ferah; gevrek") },
            { "english": "Weird", "definition": "very strange and unusual, often in a disturbing way", "turkish": toTurkishLowerCase("tuhaf") },
            { "english": "Erratically", "definition": "in an unpredictable or inconsistent way", "turkish": toTurkishLowerCase("dÃ¼zensizce") },
            { "english": "Curiosity", "definition": "a strong desire to know or learn something", "turkish": toTurkishLowerCase("merak") },
            { "english": "Staring at", "definition": "looking fixedly at someone or something for a long time", "turkish": toTurkishLowerCase("dik dik bakmak") },
            { "english": "Phenomenon", "definition": "a fact or event that exists and can be seen, but is unusual or difficult to understand", "turkish": toTurkishLowerCase("olgu, fenomen") },
            { "english": "Blend in", "definition": "to look or seem the same as the surrounding people or things", "turkish": toTurkishLowerCase("uyum saÄŸlamak") },
            { "english": "Abducted", "definition": "taken away illegally, especially using force", "turkish": toTurkishLowerCase("kaÃ§Ä±rÄ±ldÄ±") },
            { "english": "Aliens", "definition": "imaginary creatures from outer space", "turkish": toTurkishLowerCase("uzaylÄ±lar") },
            { "english": "Spin", "definition": "to turn around quickly, or to cause something to turn", "turkish": toTurkishLowerCase("dÃ¶nmek") },
            { "english": "Humanoid", "definition": "having a physical appearance resembling a human being", "turkish": toTurkishLowerCase("insansÄ±") },
            { "english": "Elongated", "definition": "made longer or stretched out", "turkish": toTurkishLowerCase("uzamÄ±ÅŸ") },
            { "english": "Limbs", "definition": "a person's or animal's arms and legs", "turkish": toTurkishLowerCase("uzuvlar") },
            { "english": "Bluish", "definition": "having a slightly blue color", "turkish": toTurkishLowerCase("mavimsi") },
            { "english": "Eerie", "definition": "strange, frightening, and mysterious", "turkish": toTurkishLowerCase("Ã¼rkÃ¼tÃ¼cÃ¼") },
            { "english": "Grace", "definition": "a smooth and elegant way of moving", "turkish": toTurkishLowerCase("zarafet") },
            { "english": "Approached", "definition": "came nearer to someone or something in distance or time", "turkish": toTurkishLowerCase("yaklaÅŸtÄ±") },
            { "english": "Forehead", "definition": "the area of the face above the eyes and below the hair", "turkish": toTurkishLowerCase("alÄ±n") },
            { "english": "Echo", "definition": "a sound that is reflected back to the listener from a distance", "turkish": toTurkishLowerCase("yankÄ±") },
            { "english": "Glance", "definition": "to look quickly and briefly", "turkish": toTurkishLowerCase("hÄ±zlÄ± bakÄ±ÅŸ") },
            { "english": "Mutter", "definition": "to speak quietly in an unclear way, usually showing annoyance", "turkish": toTurkishLowerCase("mÄ±rÄ±ldanmak") },
            { "english": "Telepathically", "definition": "communicating thoughts directly to someone else's mind", "turkish": toTurkishLowerCase("telepatik olarak") },
            { "english": "Subside", "definition": "to become less intense, severe, or violent", "turkish": toTurkishLowerCase("yatÄ±ÅŸmak") },
            { "english": "Renew", "definition": "to start something again or replace something old", "turkish": toTurkishLowerCase("yenilemek") },
            { "english": "Overwhelming", "definition": "difficult to fight against or deal with; very great in amount", "turkish": toTurkishLowerCase("bunaltÄ±cÄ±") }, 
            { "english": "Surged into", "definition": "moved very quickly and suddenly in a particular direction", "turkish": toTurkishLowerCase("iÃ§ine doÄŸru aktÄ±") }, 
            { "english": "Snooker", "definition": "a game played on a table using cues and colored balls", "turkish": toTurkishLowerCase("snooker (bilardo tÃ¼rÃ¼)") },
            { "english": "Consent", "definition": "permission or agreement to do something", "turkish": toTurkishLowerCase("onay, rÄ±za") },
            { "english": "Impeccable", "definition": "perfect, with no mistakes or faults", "turkish": toTurkishLowerCase("kusursuz") },
            { "english": "Precision", "definition": "the quality of being exact and accurate", "turkish": toTurkishLowerCase("hassasiyet") },
            { "english": "Initial", "definition": "happening at the beginning; first", "turkish": toTurkishLowerCase("ilk, baÅŸlangÄ±Ã§") },
            { "english": "Probe", "definition": "to try to discover information or examine something thoroughly", "turkish": toTurkishLowerCase("incelemek") },
            { "english": "Nod", "definition": "to move your head down and up, especially to show agreement", "turkish": toTurkishLowerCase("baÅŸÄ±nÄ± sallamak") },
            { "english": "Confer", "definition": "to discuss something with someone to make a decision", "turkish": toTurkishLowerCase("gÃ¶rÃ¼ÅŸmek, danÄ±ÅŸmak") },
            { "english": "Indicates", "definition": "shows or suggests something is true", "turkish": toTurkishLowerCase("gÃ¶sterir") },
            { "english": "Chuckling", "definition": "laughing quietly to yourself", "turkish": toTurkishLowerCase("kÄ±kÄ±rdama") },
            { "english": "Unblinking", "definition": "looking steadily without closing the eyes", "turkish": toTurkishLowerCase("gÃ¶zÃ¼nÃ¼ kÄ±rpmadan") },
            { "english": "Respond", "definition": "to say or do something as an answer or reaction", "turkish": toTurkishLowerCase("cevap vermek") },
            { "english": "Interstellar", "definition": "between the stars or concerned with travel between stars", "turkish": toTurkishLowerCase("yÄ±ldÄ±zlararasÄ±") },
            { "english": "Kidnapped", "definition": "illegally taken away and held as a prisoner", "turkish": toTurkishLowerCase("kaÃ§Ä±rÄ±ldÄ±") },
            { "english": "Wisdom", "definition": "the ability to use knowledge and experience to make good decisions", "turkish": toTurkishLowerCase("bilgelik") },
            { "english": "Insistence", "definition": "the act of demanding that something should happen", "turkish": toTurkishLowerCase("Ä±srar") },
            { "english": "Intact", "definition": "complete and not damaged; untouched", "turkish": toTurkishLowerCase("saÄŸlam, bozulmamÄ±ÅŸ") },
            { "english": "Enhanced", "definition": "improved or increased in quality or value", "turkish": toTurkishLowerCase("geliÅŸtirilmiÅŸ") },
            { "english": "Fizzing with", "definition": "full of energy and excitement; bubbling with activity", "turkish": toTurkishLowerCase("enerji dolu") },
            { "english": "Resumed", "definition": "started again after a pause or break", "turkish": toTurkishLowerCase("devam etti") },
            { "english": "Captivated", "definition": "strongly attracted and interested; charmed or fascinated", "turkish": toTurkishLowerCase("bÃ¼yÃ¼lenmiÅŸ") },
            { "english": "Encounter", "definition": "a meeting, especially one that is unexpected", "turkish": toTurkishLowerCase("karÅŸÄ±laÅŸma") },
            { "english": "Cherished", "definition": "loved and cared for very much; highly valued", "turkish": toTurkishLowerCase("deÄŸer verilen, Ã§ok sevilen") },
            { "english": "Convinced", "definition": "completely sure about something; persuaded", "turkish": toTurkishLowerCase("ikna olmuÅŸ") },
            { "english": "Curious", "definition": "having a strong desire to find out about something", "turkish": toTurkishLowerCase("meraklÄ±") },
            { "english": "Properly", "definition": "in a correct or satisfactory way", "turkish": toTurkishLowerCase("dÃ¼zgÃ¼nce") },
            { "english": "Phone reception", "definition": "the quality or strength of the signal for a mobile phone", "turkish": toTurkishLowerCase("telefon Ã§ekimi") },
            { "english": "Mark", "definition": "a visible sign or impression; a written symbol", "turkish": toTurkishLowerCase("iÅŸaret") },
            { "english": "Civilization", "definition": "human society with its developed culture and organization", "turkish": toTurkishLowerCase("medeniyet") },
            { "english": "Venture out", "definition": "to leave a safe place, often taking a risk", "turkish": toTurkishLowerCase("dÄ±ÅŸarÄ± Ã§Ä±kmak, macera atÄ±lmak") },
            { "english": "To head", "definition": "to move or travel in a particular direction", "turkish": toTurkishLowerCase("yÃ¶nelmek, gitmek") },
            { "english": "Set off", "definition": "to begin a journey or start an alarm", "turkish": toTurkishLowerCase("yola Ã§Ä±kmak, baÅŸlatmak") },
            { "english": "Layout", "definition": "the way in which something is arranged or designed", "turkish": toTurkishLowerCase("dÃ¼zen, yerleÅŸim") },
            { "english": "Approach", "definition": "a way of dealing with or thinking about a problem or task", "turkish": toTurkishLowerCase("yaklaÅŸÄ±m") },
            { "english": "Dull", "definition": "not exciting or interesting; boring", "turkish": toTurkishLowerCase("sÄ±kÄ±cÄ±, donuk") },
            { "english": "Dreary", "definition": "causing sadness or gloom; dull and depressing", "turkish": toTurkishLowerCase("kasvetli, iÃ§ karartÄ±cÄ±") },
            { "english": "Branches", "definition": "parts of a tree growing out from the trunk; a section of a system", "turkish": toTurkishLowerCase("dallar") },
            { "english": "Overgrown", "definition": "covered with too many plants that have not been controlled", "turkish": toTurkishLowerCase("aÅŸÄ±rÄ± bÃ¼yÃ¼mÃ¼ÅŸ") },
            { "english": "Greet", "definition": "to welcome or address someone in a friendly way", "turkish": toTurkishLowerCase("selamlamak") },
            { "english": "Beckon", "definition": "to signal someone to come nearer, usually by a movement of the head or hand", "turkish": toTurkishLowerCase("iÅŸaret etmek, Ã§aÄŸÄ±rmak") },
            { "english": "Run errands", "definition": "to make a short trip to do a specific task, often for someone else", "turkish": toTurkishLowerCase("ayak iÅŸlerini halletmek") },
            { "english": "Enduring", "definition": "lasting for a long time; able to survive hardship", "turkish": toTurkishLowerCase("dayanÄ±klÄ±, sÃ¼regelen") },
            { "english": "Competitive", "definition": "trying hard to be more successful than others", "turkish": toTurkishLowerCase("rekabetÃ§i") },
            { "english": "Assure", "definition": "to tell someone something confidently to remove doubt", "turkish": toTurkishLowerCase("temin etmek, garanti vermek") },
            { "english": "Despite", "definition": "without being affected by; in spite of", "turkish": toTurkishLowerCase("raÄŸmen") },
            { "english": "Dreadful", "definition": "extremely bad or unpleasant; causing fear or terror", "turkish": toTurkishLowerCase("korkunÃ§, berbat") },
            { "english": "Efficient", "definition": "working well without wasting time or energy", "turkish": toTurkishLowerCase("verimli") },
            { "english": "Shrug", "definition": "to raise your shoulders briefly to show you don't know or don't care", "turkish": toTurkishLowerCase("omuz silkmek") },
            { "english": "Aggravate", "definition": "to make a bad situation or injury worse; to annoy someone", "turkish": toTurkishLowerCase("kÃ¶tÃ¼leÅŸtirmek, sinirlendirmek") },
            { "english": "My own sake", "definition": "for one's own benefit, advantage, or well-being", "turkish": toTurkishLowerCase("kendi iyiliÄŸim iÃ§in") },
            { "english": "Insistent", "definition": "demanding strongly that something happens; persistent", "turkish": toTurkishLowerCase("Ä±srarcÄ±") },
            { "english": "Assume", "definition": "to believe something is true without having proof", "turkish": toTurkishLowerCase("varsaymak, farz etmek") },
            { "english": "Irritable", "definition": "getting easily annoyed or made angry", "turkish": toTurkishLowerCase("sinirli, Ã§abuk sinirlenen") },
            { "english": "Strangely", "definition": "in an unusual or surprising way", "turkish": toTurkishLowerCase("tuhaf bir ÅŸekilde") },
            { "english": "Ecstatic", "definition": "feeling extremely happy and excited", "turkish": toTurkishLowerCase("coÅŸkulu, Ã§ok mutlu") },
            { "english": "Hastily", "definition": "done quickly, often without careful thought", "turkish": toTurkishLowerCase("aceleyle") },
            { "english": "Urge", "definition": "to encourage or strongly recommend that someone does something", "turkish": toTurkishLowerCase("zorlamak, teÅŸvik etmek") },
            { "english": "Impatient", "definition": "annoyed by people who are slow or by things that take a long time", "turkish": toTurkishLowerCase("sabÄ±rsÄ±z") }
        ];

        // --- GLOBAL DEÄÄ°ÅKENLER VE DOM ELEMENTLERÄ° ---
        let activeWordList = [];
        let currentWord = {};
        let currentCorrectAnswer = "";
        let correctCount = 0;
        let incorrectCount = 0;
        let hintCount = 0; 
        let currentTestMode = null; 
        let areMeaningsHidden = false; 

        const startScreen = document.getElementById('start-screen');
        const gameContainer = document.getElementById('game-container');
        const studyContainer = document.getElementById('study-container'); 
        const wordDisplay = document.getElementById('word-display');
        const optionsContainer = document.getElementById('options-container');
        const feedbackDiv = document.getElementById('feedback');
        const nextButton = document.getElementById('next-button');
        const optionButtons = optionsContainer.querySelectorAll('.option-button');
        const hintButton = document.getElementById('hint-button'); 
        const hintDisplay = document.getElementById('hint-display'); 
        const studyButton = document.getElementById('study-button'); 
        const wordListTable = document.getElementById('word-list-table'); 
        const backToStartButtonStudy = document.getElementById('back-to-start-button-study'); 
        const toggleMeaningsButton = document.getElementById('toggle-meanings-button'); 
        const testModeButtons = document.querySelectorAll('.test-mode-button');
        
        const correctScoreDisplay = document.getElementById('correct-score');
        const incorrectScoreDisplay = document.getElementById('incorrect-score');
        const hintCountDisplay = document.getElementById('hint-count-display'); 
        const initialHintDisplay = document.getElementById('initial-hint-display'); 

        // --- YARDIMCI VE GÃ–RÃœNÃœM FONKSÄ°YONLARI ---

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function updateScoreDisplay() {
            correctScoreDisplay.textContent = `âœ… DoÄŸru: ${correctCount}`;
            incorrectScoreDisplay.textContent = `âŒ YanlÄ±ÅŸ: ${incorrectCount}`;
            if (hintCountDisplay) { 
                 hintCountDisplay.textContent = `ğŸ’¡ Ä°pucu: ${hintCount}`;
            }
            if (initialHintDisplay) {
                initialHintDisplay.textContent = `ğŸ’¡ Ä°pucu: ${hintCount}`;
            }
        }

        function showScreen(screenId) {
            startScreen.style.display = 'none';
            gameContainer.style.display = 'none';
            studyContainer.style.display = 'none';
            document.getElementById(screenId).style.display = 'flex'; // app-container'Ä±n flex yapÄ±sÄ±na uyum iÃ§in flex
        }

        function renderStudyList() {
            if (wordListTable.innerHTML.trim() !== "") return;
            
            let htmlContent = '';
            const sortedWords = [...allWords].sort((a, b) => a.english.localeCompare(b.english));

            sortedWords.forEach(word => {
                const cleanEnglish = word.english.toUpperCase().replace(/ \(.+\)/g, '');
                
                // Ã‡alÄ±ÅŸma modunda sadece TÃ¼rkÃ§e anlamÄ± gÃ¶sterelim
                const turkishText = word.turkish.toUpperCase();
                
                htmlContent += `
                    <div class="word-item">
                        <span class="english-word">${cleanEnglish}</span>
                        <span class="turkish-meaning" data-meaning-text="${turkishText}">
                            ${turkishText}
                        </span>
                    </div>
                `;
            });
            
            wordListTable.innerHTML = htmlContent;

            // Anlam Gizleme/GÃ¶sterme olay dinleyicilerini ekle
            wordListTable.querySelectorAll('.turkish-meaning').forEach(meaningSpan => {
                meaningSpan.addEventListener('click', () => {
                    if (areMeaningsHidden && meaningSpan.classList.contains('meaning-hidden')) {
                        meaningSpan.textContent = meaningSpan.dataset.meaningText;
                        meaningSpan.classList.remove('meaning-hidden');
                        meaningSpan.style.cursor = 'default';
                    }
                });
            });
        }
        
        function toggleMeanings() {
            areMeaningsHidden = !areMeaningsHidden;
            const meaningSpans = wordListTable.querySelectorAll('.turkish-meaning');
            
            if (areMeaningsHidden) {
                toggleMeaningsButton.textContent = 'ANLAMLARI GÃ–STER';
                meaningSpans.forEach(span => {
                    span.classList.add('meaning-hidden');
                    span.textContent = 'TÄ±klayÄ±nca AÃ§Ä±lÄ±r'; 
                    span.style.cursor = 'pointer';
                });
            } else {
                toggleMeaningsButton.textContent = 'ANLAMLARI GÄ°ZLE';
                meaningSpans.forEach(span => {
                    span.classList.remove('meaning-hidden');
                    span.textContent = span.dataset.meaningText;
                    span.style.cursor = 'default';
                });
            }
        }

        function showHint() {
            if (!hintButton.disabled) { 
                let hintText = "";
                
                // Soru tipine gÃ¶re ipucu gÃ¶ster
                if (currentTestMode === 'word_to_turkish' || currentTestMode === 'word_to_definition') {
                    // Ä°ngilizce kelime sorulduysa Ä°ngilizce tanÄ±mÄ±nÄ± gÃ¶ster
                    hintText = `Ä°NGÄ°LÄ°ZCE TANIM: ${currentWord.definition.toUpperCase()}`;
                } else if (currentTestMode === 'definition_to_word' || currentTestMode === 'turkish_to_word') {
                    // TanÄ±m veya TÃ¼rkÃ§e anlam sorulduysa Ä°ngilizce tanÄ±mÄ±nÄ± gÃ¶ster
                     hintText = `Ä°NGÄ°LÄ°ZCE TANIM: ${currentWord.definition.toUpperCase()}`;
                }
                
                hintDisplay.textContent = hintText;
                hintButton.disabled = true;
                hintCount++; 
                updateScoreDisplay();
            }
        }


        // --- OYUN AKIÅI FONKSÄ°YONLARI ---
        
        function selectTestMode(mode) {
            currentTestMode = mode;
            
            // Veri yetersizliÄŸi olan modlar iÃ§in uyarÄ±
            if (mode.startsWith('not_available')) {
                let message = "";
                if (mode === 'not_available_antonym') {
                    message = "Bu mod (ZÄ±t AnlamlÄ±sÄ±nÄ± Sorma) iÃ§in gerekli zÄ±t anlamlÄ± kelime bilgisi listede mevcut deÄŸildir.";
                } else if (mode === 'not_available_sentence') {
                    message = "Bu mod (CÃ¼mle BoÅŸluk Doldurma) iÃ§in gerekli Ã¶rnek cÃ¼mle verileri mevcut deÄŸildir.";
                } else if (mode === 'not_available_context') {
                    message = "Bu mod (FarklÄ± OlanÄ± Bulma) iÃ§in gerekli kategori verileri mevcut deÄŸildir.";
                }
                alert(message);
                currentTestMode = null;
                return;
            }
            
            startGame();
        }

        function startGame() {
            if (!currentTestMode) return;
            
            correctCount = 0;
            incorrectCount = 0;
            hintCount = 0; 
            updateScoreDisplay();

            activeWordList = shuffleArray([...allWords]);
            
            showScreen('game-container'); 
            loadNewWord();
        }

        function loadNewWord() {
            feedbackDiv.textContent = "";
            nextButton.style.display = 'none';
            optionsContainer.style.display = 'block';
            
            hintDisplay.textContent = "";
            hintButton.disabled = false;
            hintButton.style.display = 'inline-block'; 
            
            optionButtons.forEach(button => {
                button.disabled = false;
                button.classList.remove('correct', 'incorrect');
            });


            if (activeWordList.length === 0) {
                wordDisplay.textContent = "TEBRÄ°KLER! TEST BÄ°TTÄ°.";
                optionsContainer.style.display = 'none';
                hintButton.style.display = 'none';
                feedbackDiv.textContent = `NÄ°HAÄ° SKOR: DoÄŸru: ${correctCount} / YanlÄ±ÅŸ: ${incorrectCount} / Ä°pucu KullanÄ±mÄ±: ${hintCount}`;
                return;
            }

            const randomIndex = Math.floor(Math.random() * activeWordList.length);
            currentWord = activeWordList[randomIndex];
            activeWordList.splice(randomIndex, 1); 
            
            let questionText, correctOption, allPossibleDistractors;
            
            if (currentTestMode === 'word_to_turkish') {
                // Mod 3: Ä°ng. Kelimeyi verip TÃ¼rkÃ§esini sorma
                questionText = `"${currentWord.english.toUpperCase().replace(/ \(.+\)/g, '')}" kelimesinin TÃœRKÃ‡E ANLAMI nedir?`;
                correctOption = currentWord.turkish;
                allPossibleDistractors = allWords.map(w => w.turkish).filter(t => t !== correctOption);

            } else if (currentTestMode === 'turkish_to_word') {
                // Mod 4: TÃ¼rkÃ§esini verip Ä°ngilizce kelimeyi sorma
                questionText = `"${currentWord.turkish.toUpperCase()}" ne anlama gelmektedir?`;
                correctOption = currentWord.english;
                allPossibleDistractors = allWords.map(w => w.english).filter(e => e !== correctOption);
                
            } else if (currentTestMode === 'word_to_definition' || currentTestMode === 'word_to_synonym') {
                // Mod 2 & 6: Kelimeyi verip TanÄ±mÄ±nÄ± sorma
                questionText = `"${currentWord.english.toUpperCase().replace(/ \(.+\)/g, '')}" kelimesinin Ä°NGÄ°LÄ°ZCE TANIMI nedir?`;
                correctOption = currentWord.definition;
                allPossibleDistractors = allWords.map(w => w.definition).filter(d => d !== correctOption);

            } else if (currentTestMode === 'definition_to_word') {
                // Mod 1: Ä°ng. TanÄ±mÄ± verip Kelimeyi sorma
                questionText = `AÅŸaÄŸÄ±daki tanÄ±mÄ±n ait olduÄŸu kelime nedir? \n\n **"${currentWord.definition.toUpperCase()}"**`;
                correctOption = currentWord.english;
                allPossibleDistractors = allWords.map(w => w.english).filter(e => e !== correctOption);
            }

            wordDisplay.textContent = questionText; 
            currentCorrectAnswer = correctOption;

            // SeÃ§enekleri oluÅŸturma
            let wrongAnswers = shuffleArray(allPossibleDistractors).slice(0, 4); 

            const allOptions = [correctOption, ...wrongAnswers];
            const shuffledOptions = shuffleArray(allOptions);

            optionButtons.forEach((button, index) => {
                let optionText = shuffledOptions[index];

                // EÄŸer cevap Ä°ngilizce kelimenin kendisiyse, parantezli kÄ±sÄ±mlarÄ± temizle
                if (currentTestMode === 'turkish_to_word' || currentTestMode === 'definition_to_word') {
                    optionText = optionText.toUpperCase().replace(/ \(.+\)/g, '');
                } 
                // DiÄŸer modlarda (tanÄ±m/TÃ¼rkÃ§e anlam) ise sadece bÃ¼yÃ¼k harf yap
                else {
                    optionText = optionText.toUpperCase();
                }

                button.textContent = `${String.fromCharCode(65 + index)}) ${optionText}`; 
                button.value = shuffledOptions[index]; 
            });
        }

        function checkAnswer(selectedMeaning) {
            optionButtons.forEach(button => {
                button.disabled = true;
            });
            hintButton.disabled = true;
            
            const selectedButton = Array.from(optionButtons).find(btn => btn.value === selectedMeaning);
            const correctAnswerButton = Array.from(optionButtons).find(btn => btn.value === currentCorrectAnswer);

            if (selectedMeaning === currentCorrectAnswer) {
                correctCount++;
                feedbackDiv.textContent = "âœ… DoÄŸru Cevap!";
                if (selectedButton) {
                    selectedButton.classList.add('correct');
                }
            } else {
                incorrectCount++;
                feedbackDiv.textContent = `âŒ YanlÄ±ÅŸ! DoÄŸru cevap: "${currentCorrectAnswer.toUpperCase().replace(/ \(.+\)/g, '')}".`;
                if (selectedButton) {
                    selectedButton.classList.add('incorrect');
                }
                if (correctAnswerButton) {
                    correctAnswerButton.classList.add('correct');
                }
            }
            
            // YanlÄ±ÅŸ bilindiÄŸinde veya ipucu kullanÄ±lmadÄ±ÄŸÄ±nda Ä°ngilizce tanÄ±mÄ±nÄ± geri bildirim olarak gÃ¶ster
            if (hintDisplay.textContent === "") {
                 hintDisplay.textContent = `Ä°NGÄ°LÄ°ZCE TANIM: ${currentWord.definition.toUpperCase()}`;
            }


            updateScoreDisplay();
            nextButton.textContent = 'Sonraki Kelime';
            nextButton.style.display = 'block';
        }

        // --- EVENT DÄ°NLEYÄ°CÄ°LERÄ° ---
        
        testModeButtons.forEach(button => {
            button.addEventListener('click', () => {
                selectTestMode(button.dataset.mode);
            });
        });
        
        hintButton.addEventListener('click', showHint); 
        studyButton.addEventListener('click', () => {
            renderStudyList();
            showStudyMode();
        }); 
        backToStartButtonStudy.addEventListener('click', () => showScreen('start-screen')); 
        toggleMeaningsButton.addEventListener('click', toggleMeanings); 

        optionButtons.forEach(button => {
            button.addEventListener('click', () => {
                checkAnswer(button.value);
            });
        });

        nextButton.addEventListener('click', loadNewWord);

        // BaÅŸlangÄ±Ã§
        updateScoreDisplay();
        showScreen('start-screen'); 

    </script>
</body>
</html>
