<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ƒ∞ngilizce Kelime Oyunu</title>
    
    <style>
        /* Siyah Tema CSS Stil Ayarlarƒ± */
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #000000;
            color: #ffffff;
        }

        #app-container {
            background: #1a1a1a;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(255, 255, 255, 0.1);
            width: 90%;
            max-width: 700px;
            text-align: center;
        }

        #start-screen h2, #study-container h2 {
            color: #00bcd4;
            margin-bottom: 20px;
        }
        
        /* Mod Butonlarƒ± (Genel) */
        .mode-button {
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
            margin: 10px 5px; /* Yatayda biraz bo≈üluk */
        }

        /* Test Modu Butonlarƒ± */
        .test-mode-button { 
            background-color: #4caf50; 
            color: black;
            margin-bottom: 10px;
            width: calc(50% - 10px); /* ƒ∞ki butonu yan yana getirmek i√ßin */
            display: inline-block;
            box-sizing: border-box;
            font-size: 0.9em; /* K√º√ß√ºk ekranlar i√ßin metni sƒ±ƒüdƒ±r */
        }
        .test-mode-button:hover {
            background-color: #45a049;
        }

        /* Kelime √áalƒ±≈üma Butonu */
        #study-button, #back-to-start-button-study, #toggle-meanings-button {
            background-color: #ff9800;
            color: black;
        }
        #study-button:hover, #back-to-start-button-study:hover, #toggle-meanings-button:hover {
            background-color: #e68a00;
        }

        #toggle-meanings-button {
            margin-bottom: 15px;
        }

        /* Saya√ß Stil Ayarƒ± */
        #score-display, #initial-score-display {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
            display: flex; 
            justify-content: space-around;
            padding: 10px 0;
            background-color: #0d0d0d;
            border-radius: 6px;
        }
        
        #word-display {
            font-size: 3em; /* Soruyu sƒ±ƒüdƒ±rmak i√ßin k√º√ß√ºlt√ºld√º */
            font-weight: bold;
            color: #4caf50;
            margin-bottom: 40px;
            letter-spacing: 1px;
            text-transform: uppercase; 
            min-height: 1.2em;
        }

        .option-button {
            background-color: #333333;
            color: #ffffff;
            border: 1px solid #444444;
            width: 100%;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            font-size: 1.1em;
            text-align: left;
            cursor: pointer;
            transition: background-color 0.15s, transform 0.1s;
        }

        .option-button:hover:not(:disabled) {
            background-color: #555555;
        }

        /* Geri Bildirim Renkleri */
        .option-button.correct {
            background-color: #4caf50 !important; 
            color: white;
            font-weight: bold;
        }

        .option-button.incorrect {
            background-color: #f44336 !important; 
            color: white;
        }

        #feedback {
            margin-top: 20px;
            font-size: 1.3em;
            font-weight: bold;
            min-height: 30px;
        }

        /* ƒ∞pucu Butonu Stili */
        #hint-button {
            background-color: #00bcd4; 
            color: black;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            margin-top: 15px;
            transition: background-color 0.3s;
            font-weight: bold;
        }
        #hint-button:hover:not(:disabled) {
            background-color: #00a0b0;
        }
        #hint-button:disabled {
            opacity: 0.5;
            cursor: default;
        }
        
        #next-button {
            background-color: #ff9800;
            color: black;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1.1em;
            cursor: pointer;
            margin-top: 20px;
            transition: background-color 0.3s;
        }
        
        /* Kelime Listesi Stilleri (Study Mode) */
        #word-list-table {
            max-height: 400px;
            overflow-y: auto;
            margin: 20px 0;
            padding: 10px;
            border: 1px solid #444444;
            border-radius: 8px;
            text-align: left;
            background-color: #0d0d0d;
        }

        .word-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px dotted #333333;
        }

        .word-item:last-child {
            border-bottom: none;
        }

        .english-word {
            font-weight: bold;
            color: #4caf50;
            text-transform: uppercase;
            flex-basis: 40%;
        }

        .turkish-meaning {
            color: #00bcd4;
            flex-basis: 60%;
            cursor: pointer; 
        }

        /* Gizli Anlamlar Stili (Click-to-reveal i√ßin) */
        .meaning-hidden {
            color: transparent !important; 
            background-color: #333333; 
            border-radius: 4px;
            padding: 0 5px;
            user-select: none; 
            transition: background-color 0.1s;
        }
        
        .meaning-hidden:hover {
             background-color: #555555;
        }
    </style>
</head>
<body>

    <div id="app-container">
        
        <div id="start-screen">
            <h2>ƒ∞ngilizce Kelime Testine Ho≈ü Geldiniz!</h2>
            <p>Toplam **59** kelimelik bir teste ba≈ülamak √ºzeresiniz.</p>
            <div id="initial-score-display">
                <span style="color: #4caf50;">‚úÖ Doƒüru: 0</span>
                <span style="color: #f44336;">‚ùå Yanlƒ±≈ü: 0</span>
                <span id="initial-hint-display" style="color: #00bcd4;">üí° ƒ∞pucu: 0</span>
            </div>

            <h3>Test Modunu Se√ßin:</h3>
            <div id="test-mode-selection">
                <button id="mode-1" class="mode-button test-mode-button" data-mode="synonym_to_word">1. ƒ∞ng. Tanƒ±m (E≈ü Anlam) &rarr; Kelime</button>
                <button id="mode-2" class="mode-button test-mode-button" data-mode="word_to_synonym">2. Kelime &rarr; E≈ü Anlam</button>
                <button id="mode-3" class="mode-button test-mode-button" data-mode="word_to_turkish">3. ƒ∞ng. Kelime &rarr; T√ºrk√ße Anlam</button>
                <button id="mode-4" class="mode-button test-mode-button" data-mode="turkish_to_word">4. T√ºrk√ße Anlam &rarr; ƒ∞ng. Kelime</button>
                
                <button id="mode-6" class="mode-button test-mode-button" data-mode="word_to_synonym">6. Kelime &rarr; Tanƒ±m (E≈ü Anlam)</button>
                <button id="mode-8" class="mode-button test-mode-button" data-mode="not_available_context">8. Farklƒ± Olanƒ± Bulma</button>
                
                <button id="mode-5" class="mode-button test-mode-button" data-mode="not_available_antonym">5. Zƒ±t Anlamlƒ±sƒ±nƒ± Sorma</button>
                <button id="mode-7" class="mode-button test-mode-button" data-mode="not_available_sentence">7. C√ºmle Bo≈üluk Doldurma</button>
            </div>
            
            <hr style="border-color: #333; margin: 30px 0;">
            <button id="study-button" class="mode-button">KELƒ∞ME √áALI≈ûMA</button>
        </div>
        
        <div id="study-container" style="display:none;">
            <h2>Kelime √áalƒ±≈üma B√∂l√ºm√º (ƒ∞ngilizce - T√ºrk√ße)</h2>
            <p>Kelimeleri alfabetik sƒ±raya g√∂re g√∂rebilirsiniz.</p>
            <button id="toggle-meanings-button" class="mode-button">ANLAMLARI Gƒ∞ZLE</button>
            <div id="word-list-table">
                </div>
            <button id="back-to-start-button-study" class="mode-button">ANA EKRANA D√ñN</button>
        </div>
        
        <div id="game-container" style="display:none;"> 
            <div id="score-display">
                <span id="correct-score" style="color: #4caf50;">‚úÖ Doƒüru: 0</span>
                <span id="incorrect-score" style="color: #f44336;">‚ùå Yanlƒ±≈ü: 0</span>
                <span id="hint-count-display" style="color: #00bcd4;">üí° ƒ∞pucu: 0</span>
            </div>
            
            <div id="word-display">WORD LOADING...</div>
            
            <div id="options-container">
                <button class="option-button" data-key="A"></button>
                <button class="option-button" data-key="B"></button>
                <button class="option-button" data-key="C"></button>
                <button class="option-button" data-key="D"></button>
                <button class="option-button" data-key="E"></button>
            </div>

            <button id="hint-button">üí° ƒ∞pucu G√∂ster</button>
            <div id="hint-display"></div>
            <div id="feedback"></div>
            <button id="next-button" style="display:none;">Sonraki Kelime</button>
        </div>
    </div>

    <script>
        function toEnglishLowerCase(text) {
            if (!text) return '';
            return text.toLowerCase();
        }
        
        function toTurkishLowerCase(text) {
            if (!text) return '';
            return text.toLocaleLowerCase('tr');
        }

        // --- KELƒ∞ME Lƒ∞STESƒ∞: DOSYADAN PARSE EDƒ∞LEN 59 KELƒ∞ME ---
        // Liste i√ßeriƒüi "kelime listesi.docx" dosyasƒ±ndan olu≈üturulmu≈ütur.
        const allWords = [
            { "english": "Ordinary", "turkish": toTurkishLowerCase("sƒ±radan"), "synonym": "usual, common, typical" },
            { "english": "Quaint", "turkish": toTurkishLowerCase("ilgin√ß, sevimli eski tarz"), "synonym": "charming, picturesque, old-fashioned" },
            { "english": "Outskirts", "turkish": toTurkishLowerCase("kenar mahalleler, ≈üehrin dƒ±≈üƒ±"), "synonym": "suburbs, fringe, edge" },
            { "english": "Immersing", "turkish": toTurkishLowerCase("dalmak, kendini kaptƒ±rmak"), "synonym": "absorbing, engaging, plunging" },
            { "english": "Fixing up", "turkish": toTurkishLowerCase("tamir etme, toparlama"), "synonym": "repairing, renovating, mending" },
            { "english": "Relatively", "turkish": toTurkishLowerCase("nispeten"), "synonym": "comparatively, fairly, somewhat" },
            { "english": "Uneventful", "turkish": toTurkishLowerCase("olaysƒ±z, sakin"), "synonym": "calm, quiet, routine" },
            { "english": "Hurdle", "turkish": toTurkishLowerCase("engel"), "synonym": "obstacle, barrier, difficulty" },
            { "english": "Encountered", "turkish": toTurkishLowerCase("kar≈üƒ±la≈ütƒ±"), "synonym": "met, came across, faced" },
            { "english": "Draughty (Drafty)", "turkish": toTurkishLowerCase("cereyan yapan"), "synonym": "breezy, chilly, windy" },
            { "english": "Crisp", "turkish": toTurkishLowerCase("serin/ferah; gevrek"), "synonym": "fresh, cool; crunchy" },
            { "english": "Weird", "turkish": toTurkishLowerCase("tuhaf"), "synonym": "strange, odd, unusual" },
            { "english": "Erratically", "turkish": toTurkishLowerCase("d√ºzensizce"), "synonym": "unpredictably, irregularly, randomly" },
            { "english": "Curiosity", "turkish": toTurkishLowerCase("merak"), "synonym": "inquisitiveness, interest, wonder" },
            { "english": "Staring at", "turkish": toTurkishLowerCase("dik dik bakmak"), "synonym": "gazing at, looking at, watching" },
            { "english": "Phenomenon", "turkish": toTurkishLowerCase("olgu, fenomen"), "synonym": "event, occurrence, happening" },
            { "english": "Blend in", "turkish": toTurkishLowerCase("uyum saƒülamak"), "synonym": "fit in, merge, integrate" },
            { "english": "Abducted", "turkish": toTurkishLowerCase("ka√ßƒ±rƒ±ldƒ±"), "synonym": "kidnapped, seized, taken away" },
            { "english": "Aliens", "turkish": toTurkishLowerCase("uzaylƒ±lar"), "synonym": "extraterrestrials, beings, outsiders" },
            { "english": "Spin", "turkish": toTurkishLowerCase("d√∂nmek"), "synonym": "rotate, whirl, twirl" },
            { "english": "Humanoid", "turkish": toTurkishLowerCase("insansƒ±"), "synonym": "human-like, anthropoid" },
            { "english": "Elongated", "turkish": toTurkishLowerCase("uzamƒ±≈ü"), "synonym": "extended, lengthened, stretched" },
            { "english": "Limbs", "turkish": toTurkishLowerCase("uzuvlar"), "synonym": "appendages, arms and legs" },
            { "english": "Bluish", "turkish": toTurkishLowerCase("mavimsi"), "synonym": "blue-tinted, azure-ish" },
            { "english": "Eerie", "turkish": toTurkishLowerCase("√ºrk√ºt√ºc√º"), "synonym": "spooky, uncanny, creepy" },
            { "english": "Grace", "turkish": toTurkishLowerCase("zarafet"), "synonym": "elegance, poise, refinement" },
            { "english": "Approached", "turkish": toTurkishLowerCase("yakla≈ütƒ±"), "synonym": "came near, moved toward, advanced" },
            { "english": "Forehead", "turkish": toTurkishLowerCase("alƒ±n"), "synonym": "brow" },
            { "english": "Echo", "turkish": toTurkishLowerCase("yankƒ±"), "synonym": "reverberation, resound" },
            { "english": "Glance", "turkish": toTurkishLowerCase("hƒ±zlƒ± bakƒ±≈ü"), "synonym": "peek, glimpse, look briefly" },
            { "english": "Mutter", "turkish": toTurkishLowerCase("mƒ±rƒ±ldanmak"), "synonym": "mumble, murmur, whisper" },
            { "english": "Telepathically", "turkish": toTurkishLowerCase("telepatik olarak"), "synonym": "psychically, mind-to-mind" },
            { "english": "Subside", "turkish": toTurkishLowerCase("yatƒ±≈ümak"), "synonym": "diminish, lessen, ease" },
            { "english": "Renew", "turkish": toTurkishLowerCase("yenilemek"), "synonym": "restore, refresh, revive" },
            // Not: "Surged into overwhelming" c√ºmlesi listede tek bir kelime gibi duruyor, onu tek bir giri≈ü olarak bƒ±rakƒ±yorum
            { "english": "Surged into overwhelming", "turkish": toTurkishLowerCase("bunaltƒ±cƒ± ≈üekilde y√ºkseldi"), "synonym": "flooded, rushed, intensified" }, 
            { "english": "Snooker", "turkish": toTurkishLowerCase("snooker (bilardo t√ºr√º)"), "synonym": "‚Äî" }, // E≈ü anlam bo≈ü
            { "english": "Consent", "turkish": toTurkishLowerCase("onay, rƒ±za"), "synonym": "permission, approval, agreement" },
            { "english": "Impeccable", "turkish": toTurkishLowerCase("kusursuz"), "synonym": "flawless, perfect, immaculate" },
            { "english": "Precision", "turkish": toTurkishLowerCase("hassasiyet"), "synonym": "accuracy, exactness, meticulousness" },
            { "english": "Initial", "turkish": toTurkishLowerCase("ilk, ba≈ülangƒ±√ß"), "synonym": "first, preliminary, original" },
            { "english": "Probe", "turkish": toTurkishLowerCase("incelemek"), "synonym": "investigate, examine, explore" },
            { "english": "Nod", "turkish": toTurkishLowerCase("ba≈üƒ±nƒ± sallamak"), "synonym": "agree, bow, dip" },
            { "english": "Confer", "turkish": toTurkishLowerCase("g√∂r√º≈ümek, danƒ±≈ümak"), "synonym": "consult, discuss, deliberate" },
            { "english": "Indicates", "turkish": toTurkishLowerCase("g√∂sterir"), "synonym": "shows, signifies, points out" },
            { "english": "Chuckling", "turkish": toTurkishLowerCase("kƒ±kƒ±rdama"), "synonym": "giggling, laughing softly" },
            { "english": "Unblinking", "turkish": toTurkishLowerCase("g√∂z√ºn√º kƒ±rpmadan"), "synonym": "staring, fixed-eyed" },
            { "english": "Respond", "turkish": toTurkishLowerCase("cevap vermek"), "synonym": "reply, answer, react" },
            { "english": "Interstellar", "turkish": toTurkishLowerCase("yƒ±ldƒ±zlararasƒ±"), "synonym": "cosmic, between stars" },
            { "english": "Kidnapped", "turkish": toTurkishLowerCase("ka√ßƒ±rƒ±ldƒ±"), "synonym": "abducted, seized, taken" },
            { "english": "Wisdom", "turkish": toTurkishLowerCase("bilgelik"), "synonym": "insight, knowledge, sagacity" },
            { "english": "Insistence", "turkish": toTurkishLowerCase("ƒ±srar"), "synonym": "persistence, demand, emphasis" },
            { "english": "Intact", "turkish": toTurkishLowerCase("saƒülam, bozulmamƒ±≈ü"), "synonym": "undamaged, whole, complete" },
            { "english": "Enhanced", "turkish": toTurkishLowerCase("geli≈ütirilmi≈ü"), "synonym": "improved, boosted, augmented" },
            { "english": "Fizzing with", "turkish": toTurkishLowerCase("enerji dolu"), "synonym": "bubbling with, brimming with" },
            { "english": "Resumed", "turkish": toTurkishLowerCase("devam etti"), "synonym": "continued, restarted, carried on" },
            { "english": "Captivated", "turkish": toTurkishLowerCase("b√ºy√ºlenmi≈ü"), "synonym": "fascinated, enchanted, enthralled" },
            { "english": "Encounter", "turkish": toTurkishLowerCase("kar≈üƒ±la≈üma"), "synonym": "meeting, confrontation, run-in" },
            { "english": "Cherished", "turkish": toTurkishLowerCase("deƒüer verilen, √ßok sevilen"), "synonym": "treasured, beloved, precious" },
            { "english": "Convinced", "turkish": toTurkishLowerCase("ikna olmu≈ü"), "synonym": "persuaded, assured, certain" }
        ];


        // --- GLOBAL DEƒûƒ∞≈ûKENLER VE DOM ELEMENTLERƒ∞ ---
        let activeWordList = [];
        let currentWord = {};
        let currentCorrectAnswer = "";
        let currentTurkishMeaning = ""; 
        let correctCount = 0;
        let incorrectCount = 0;
        let hintCount = 0; 
        let currentTestMode = null; 

        let areMeaningsHidden = false; 

        const startScreen = document.getElementById('start-screen');
        const gameContainer = document.getElementById('game-container');
        const studyContainer = document.getElementById('study-container'); 
        const wordDisplay = document.getElementById('word-display');
        const optionsContainer = document.getElementById('options-container');
        const feedbackDiv = document.getElementById('feedback');
        const nextButton = document.getElementById('next-button');
        const optionButtons = optionsContainer.querySelectorAll('.option-button');
        const hintButton = document.getElementById('hint-button'); 
        const hintDisplay = document.getElementById('hint-display'); 
        const studyButton = document.getElementById('study-button'); 
        const wordListTable = document.getElementById('word-list-table'); 
        const backToStartButtonStudy = document.getElementById('back-to-start-button-study'); 
        const toggleMeaningsButton = document.getElementById('toggle-meanings-button'); 
        
        const testModeButtons = document.querySelectorAll('.test-mode-button');
        
        const correctScoreDisplay = document.getElementById('correct-score');
        const incorrectScoreDisplay = document.getElementById('incorrect-score');
        const hintCountDisplay = document.getElementById('hint-count-display'); 
        const initialHintDisplay = document.getElementById('initial-hint-display'); 
        

        // --- YARDIMCI VE G√ñR√úN√úM FONKSƒ∞YONLARI ---

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function updateScoreDisplay() {
            correctScoreDisplay.textContent = `‚úÖ Doƒüru: ${correctCount}`;
            incorrectScoreDisplay.textContent = `‚ùå Yanlƒ±≈ü: ${incorrectCount}`;
            if (hintCountDisplay) { 
                 hintCountDisplay.textContent = `üí° ƒ∞pucu: ${hintCount}`;
            }
            if (initialHintDisplay) {
                initialHintDisplay.textContent = `üí° ƒ∞pucu: ${hintCount}`;
            }
        }

        function showScreen(screenId) {
            startScreen.style.display = 'none';
            gameContainer.style.display = 'none';
            studyContainer.style.display = 'none';
            document.getElementById(screenId).style.display = 'block';
        }

        // Kelime Listesi Olu≈üturma
        function renderStudyList() {
            if (wordListTable.innerHTML.trim() !== "") return;
            
            let htmlContent = '';
            const sortedWords = [...allWords].sort((a, b) => a.english.localeCompare(b.english));

            sortedWords.forEach(word => {
                const cleanEnglish = word.english.toUpperCase().replace(/ \(.+\)/g, '');
                // T√ºrk√ße anlamƒ±nƒ± ve e≈ü anlamƒ±nƒ± g√∂ster
                const fullTurkishMeaning = `${word.turkish.toUpperCase()} (E≈ü Anlam: ${word.synonym.toUpperCase()})`;
                
                htmlContent += `
                    <div class="word-item">
                        <span class="english-word">${cleanEnglish}</span>
                        <span class="turkish-meaning" data-meaning-text="${fullTurkishMeaning}">
                            ${fullTurkishMeaning}
                        </span>
                    </div>
                `;
            });
            
            wordListTable.innerHTML = htmlContent;

            // Anlam Gizleme/G√∂sterme olay dinleyicilerini ekle
            wordListTable.querySelectorAll('.turkish-meaning').forEach(meaningSpan => {
                meaningSpan.addEventListener('click', () => {
                    if (areMeaningsHidden && meaningSpan.classList.contains('meaning-hidden')) {
                        meaningSpan.textContent = meaningSpan.dataset.meaningText;
                        meaningSpan.classList.remove('meaning-hidden');
                        meaningSpan.style.cursor = 'default';
                    }
                });
            });
        }
        
        // Anlamlarƒ± Gizle/G√∂ster fonksiyonu
        function toggleMeanings() {
            areMeaningsHidden = !areMeaningsHidden;
            const meaningSpans = wordListTable.querySelectorAll('.turkish-meaning');
            
            if (areMeaningsHidden) {
                toggleMeaningsButton.textContent = 'ANLAMLARI G√ñSTER';
                meaningSpans.forEach(span => {
                    span.classList.add('meaning-hidden');
                    span.textContent = 'Tƒ±klayƒ±nca A√ßƒ±lƒ±r'; 
                    span.style.cursor = 'pointer';
                });
            } else {
                toggleMeaningsButton.textContent = 'ANLAMLARI Gƒ∞ZLE';
                meaningSpans.forEach(span => {
                    span.classList.remove('meaning-hidden');
                    span.textContent = span.dataset.meaningText;
                    span.style.cursor = 'pointer';
                });
            }
        }


        function showStartScreen() {
            showScreen('start-screen');
            currentTestMode = null; 
        }

        function showStudyMode() {
            renderStudyList(); 
            showScreen('study-container'); 
            
            // √áalƒ±≈üma ekranƒ± a√ßƒ±ldƒ±ƒüƒ±nda varsayƒ±lan olarak anlamlarƒ± g√∂ster
            areMeaningsHidden = false; 
            toggleMeaningsButton.textContent = 'ANLAMLARI Gƒ∞ZLE';
            wordListTable.querySelectorAll('.turkish-meaning').forEach(span => {
                span.classList.remove('meaning-hidden');
                span.textContent = span.dataset.meaningText;
            });
        }
        
        function showHint() {
            if (!hintButton.disabled) { 
                hintDisplay.textContent = `T√úRK√áE ANLAMI: ${currentTurkishMeaning.toUpperCase()}`;
                hintButton.disabled = true;
                hintCount++; 
                updateScoreDisplay();
            }
        }


        // --- OYUN AKI≈ûI FONKSƒ∞YONLARI ---
        
        // Test modunu ayarlar ve oyunu ba≈ülatƒ±r
        function selectTestMode(mode) {
            currentTestMode = mode;
            
            // Gerekli verinin olmadƒ±ƒüƒ± modlar i√ßin uyarƒ± g√∂ster
            if (mode.startsWith('not_available')) {
                let message = "";
                if (mode === 'not_available_antonym') {
                    message = "Bu mod (Zƒ±t Anlamlƒ±sƒ±nƒ± Sorma) i√ßin gerekli zƒ±t anlamlƒ± kelime bilgisi listede mevcut deƒüildir.";
                } else if (mode === 'not_available_sentence') {
                    message = "Bu mod (C√ºmle Bo≈üluk Doldurma) i√ßin gerekli √∂rnek c√ºmle verileri mevcut deƒüildir.";
                } else if (mode === 'not_available_context') {
                    message = "Bu mod (Farklƒ± Olanƒ± Bulma) i√ßin gerekli kategori verileri mevcut deƒüildir.";
                }
                alert(message);
                showStartScreen();
                return;
            }
            
            startGame();
        }

        function startGame() {
            if (!currentTestMode) return;
            
            correctCount = 0;
            incorrectCount = 0;
            hintCount = 0; 
            updateScoreDisplay();

            // Sadece synonym alanƒ± bo≈ü olmayan kelimeleri de teste dahil edebiliriz
            activeWordList = shuffleArray([...allWords].filter(w => w.synonym !== '‚Äî' || currentTestMode !== 'word_to_synonym'));
            
            showScreen('game-container'); 
            loadNewWord();
        }

        function loadNewWord() {
            feedbackDiv.textContent = "";
            nextButton.style.display = 'none';
            optionsContainer.style.display = 'block';
            
            hintDisplay.textContent = "";
            hintButton.disabled = false;
            hintButton.style.display = 'block'; 
            
            optionButtons.forEach(button => {
                button.disabled = false;
                button.classList.remove('correct', 'incorrect');
            });


            if (activeWordList.length === 0) {
                wordDisplay.textContent = "TEBRƒ∞KLER! TEST Bƒ∞TTƒ∞.";
                optionsContainer.style.display = 'none';
                hintButton.style.display = 'none';
                feedbackDiv.textContent = `Nƒ∞HAƒ∞ SKOR: Doƒüru: ${correctCount} / Yanlƒ±≈ü: ${incorrectCount} / ƒ∞pucu Kullanƒ±mƒ±: ${hintCount}`;
                return;
            }

            const randomIndex = Math.floor(Math.random() * activeWordList.length);
            currentWord = activeWordList[randomIndex];
            activeWordList.splice(randomIndex, 1); 
            
            let questionText, correctOption, allPossibleDistractors;
            
            currentTurkishMeaning = currentWord.turkish; // ƒ∞pucu i√ßin T√ºrk√ße anlamƒ±nƒ± her zaman sakla

            if (currentTestMode === 'word_to_turkish') {
                // Mod 3: ƒ∞ng. Kelimeyi verip T√ºrk√ßesini sorma
                questionText = `"${currentWord.english.toUpperCase().replace(/ \(.+\)/g, '')}" kelimesinin T√úRK√áE ANLAMI nedir?`;
                correctOption = currentWord.turkish;
                allPossibleDistractors = allWords.map(w => w.turkish).filter(t => t !== correctOption);

            } else if (currentTestMode === 'turkish_to_word') {
                // Mod 4: T√ºrk√ßesini verip ƒ∞ngilizce kelimeyi sorma
                questionText = `"${currentWord.turkish.toUpperCase()}" ne anlama gelmektedir?`;
                correctOption = currentWord.english;
                allPossibleDistractors = allWords.map(w => w.english).filter(e => e !== correctOption);
                
            } else if (currentTestMode === 'word_to_synonym') {
                // Mod 2 & 6: Kelimeyi verip E≈ü anlam/Tanƒ±mƒ±nƒ± sorma
                questionText = `"${currentWord.english.toUpperCase().replace(/ \(.+\)/g, '')}" kelimesinin E≈û ANLAMI (Tanƒ±mƒ±) nedir?`;
                correctOption = currentWord.synonym;
                allPossibleDistractors = allWords.map(w => w.synonym).filter(s => s !== correctOption && s !== '‚Äî');

            } else if (currentTestMode === 'synonym_to_word') {
                // Mod 1: ƒ∞ng. Tanƒ±m (E≈ü Anlam) verip Kelimeyi sorma
                questionText = `"${currentWord.synonym.toUpperCase()}" ne anlama gelmektedir?`;
                correctOption = currentWord.english;
                allPossibleDistractors = allWords.map(w => w.english).filter(e => e !== correctOption);
            }

            wordDisplay.textContent = questionText; 
            currentCorrectAnswer = correctOption;

            // Se√ßenekleri olu≈üturma
            let wrongAnswers = shuffleArray(allPossibleDistractors).slice(0, 4); 

            const allOptions = [correctOption, ...wrongAnswers];
            const shuffledOptions = shuffleArray(allOptions);

            optionButtons.forEach((button, index) => {
                let optionText = shuffledOptions[index];

                // Eƒüer cevap T√ºrk√ße veya ƒ∞ngilizce kelimenin kendisiyse, parantezli kƒ±sƒ±mlarƒ± temizle
                if (currentTestMode === 'word_to_turkish' || currentTestMode === 'synonym_to_word' || currentTestMode === 'turkish_to_word') {
                    optionText = optionText.toUpperCase().replace(/ \(.+\)/g, '');
                } else {
                    // Diƒüer modlarda (e≈ü anlam/tanƒ±m) ise sadece b√ºy√ºk harf yap
                    optionText = optionText.toUpperCase();
                }

                button.textContent = `${String.fromCharCode(65 + index)}) ${optionText}`; 
                button.value = shuffledOptions[index]; 
            });
        }

        function checkAnswer(selectedMeaning) {
            optionButtons.forEach(button => {
                button.disabled = true;
            });
            hintButton.disabled = true;
            
            const selectedButton = Array.from(optionButtons).find(btn => btn.value === selectedMeaning);
            const correctAnswerButton = Array.from(optionButtons).find(btn => btn.value === currentCorrectAnswer);

            if (selectedMeaning === currentCorrectAnswer) {
                correctCount++;
                feedbackDiv.textContent = "‚úÖ Doƒüru Cevap!";
                if (selectedButton) {
                    selectedButton.classList.add('correct');
                }
            } else {
                incorrectCount++;
                feedbackDiv.textContent = `‚ùå Yanlƒ±≈ü! Doƒüru cevap: "${currentCorrectAnswer.toUpperCase()}".`;
                if (selectedButton) {
                    selectedButton.classList.add('incorrect');
                }
                if (correctAnswerButton) {
                    correctAnswerButton.classList.add('correct');
                }
            }
            
            // Yanlƒ±≈ü bilindiƒüinde veya ipucu kullanƒ±lmadƒ±ƒüƒ±nda T√ºrk√ße anlamƒ± geri bildirim olarak g√∂ster
            if (hintDisplay.textContent === "") {
                 hintDisplay.textContent = `T√úRK√áE ANLAMI: ${currentTurkishMeaning.toUpperCase()}`;
            }

            updateScoreDisplay();
            nextButton.textContent = 'Sonraki Kelime';
            nextButton.style.display = 'block';
        }

        // --- EVENT Dƒ∞NLEYƒ∞Cƒ∞LERƒ∞ ---
        
        testModeButtons.forEach(button => {
            button.addEventListener('click', () => {
                selectTestMode(button.dataset.mode);
            });
        });
        
        hintButton.addEventListener('click', showHint); 
        studyButton.addEventListener('click', showStudyMode); 
        backToStartButtonStudy.addEventListener('click', showStartScreen); 
        toggleMeaningsButton.addEventListener('click', toggleMeanings); 

        optionButtons.forEach(button => {
            button.addEventListener('click', () => {
                checkAnswer(button.value);
            });
        });

        nextButton.addEventListener('click', loadNewWord);

        // Ba≈ülangƒ±√ßta skoru g√∂ster ve Ana Ekranƒ± g√∂ster
        updateScoreDisplay();
        showStartScreen(); 

    </script>
</body>
</html>
